# SQL基礎

## 1. データを取得する

### 1-1. SELECT
データベースから、データを取得するためには **「SELECT」** を用います。このSELECTを用いて、「どのカラムのデータを取得するか」を選びます。

```SQL
  SELECT カラム名
```

<br><br>

###  1-2. FROM
データベースには複数のテーブルが存在する場合があります。
そのため、 **「FROM」** を用いて、SELECTで選んだカラムが「どのテーブルのカラムか」を指定する必要があります。

```SQL
  SELECT カラム名 FROM テーブル名;
```

<br><br>


### 1-3. WHERE 　
特定のデータを取得するためには、「どこの」という意味を持つ **「WHERE」**  を用います。
「SELECT」と「FROM」で「どのテーブルのどのカラムのデータを取得するか」までは決まっていますので、「WHERE」が意味するのは、「どこのレコード（横の行）を取得するか」になります。
「どこのレコード（横の行）のデータを取得するか」を指定するためには、「＝」を用いて、「〇〇カラムが〇〇であるレコード」といった意味になるように条件を指定します。

```SQL
  SELECT * FROM テーブル名　WHERE カラム名 = 文字列や値など
```

<br><br>

### 1-4. LIKE演算子
「ある文字を含むデータ」を取得したい場合は、「〜のような」という意味を持つ、「LIKE演算子」を用います。「指定したカラムが〇〇を含む（〇〇のような）レコード」という条件となります。

```SQL
  SELECT *
  FROM テーブル名
  WHERE name LIKE "% ○ ○ %";

  -- 「 ○ ○ 」の前後のワイルドカード（％）により、
  -- 「 ○ ○ 」という文字を含むデータが取得可能
```
#### 1-4-1. ワイルドカード
LIKE演算子を用いる際に覚えておく必要があるのが「ワイルドカード」です。コンピュータの世界で「ワイルドカード」とは、どんな文字列にも一致することを指す記号です。LIKE演算子では「％」をワイルドカードとして扱います。

#### 1-4-2. 前方一致,  後方一致
ワイルドカードを文字列の前後どちらかにのみ置くことも可能です。
「〇〇%」とした場合、「〇〇」以降はどんな文字列にも一致しますので、「〇〇」で始まる文字列を検索することができます。このような検索を「前方一致」と呼びます。
また、「%〇〇」とした場合、「〇〇」より前はどんな文字列にも一致しますので「〇〇」で終わる文字列を検索することができます。このような検索を「後方一致」と呼びます。

<br><br>


### 1-5. NOT演算子
「〇〇を含まないデータ」や「〇〇に一致しないデータ」のような条件でデータを取得したい場合は「否定」を意味する「NOT演算子」を用います。
これまで学習した演算子の前に「NOT」を置くことで、その条件を満たさないデータを取得することが可能です。

```SQL
  SELECT *
  FROM テーブル名
  WHERE NOT カラム名 = " ○ ○ ";
```

<br><br>

### 1-6. IS NULL （NULLのデータを取得する）
NULLのデータを取得するためには「〜がNULLである」という意味になる、「IS NULL」を用います。
図のように「カラム名 IS NULL」とすることで、「指定したカラムがNULLであるデータ」を取得することが可能です。

```SQL
  SELECT *
  FROM テーブル名
  WHERE カラム名 IS NULL;
```
<br><br>

### 1-7. IS NOT NULL （NULLではないデータを取得する）
「NULLではないデータ」を取得する場合は「〜がNULLでない」という意味になる「IS NOT NULL」を用います。「IS NOT NULL」も「IS NULL」と同様に、「カラム名 IS NOT NULL」のようにして使います。

```SQL
  SELECT *
  FROM テーブル名
  WHERE カラム名 IS NOT NULL;
```

### 1-8. AND演算子
**AND演算子** を使うと、WHEREに複数の条件を指定することができます。「WHERE 条件１ AND 条件２」のようにすることで、条件１と条件２を共に満たすデータを検索することができます。

```SQL
  SELECT *
  FROM テーブル名
  WHERE カラム名 = 〇〇
  AND カラム名 = "〇〇";
```

<br><br>

### 1-9. OR演算子
OR演算子は、AND演算子と同様に、複数の条件を扱います。「WHERE 条件１ OR 条件２」のようにすることで、条件１または条件２のどちらかを満たすデータを検索することができます。

```SQL
  SELECT *
  FROM テーブル名
  WHERE カラム名 = 〇〇
  OR カラム名 = "〇〇";
```

<br><br>

### 1-10. ORDER BY
データを並び替えるためには、「〜順に並べる」という意味の **「ORDER BY」** を用います。またデータを並び替えるためには、「（基準となる）並べ替えたいカラム名」と「並べ方」を指定します。

#### 1-10-1. 昇順と降順
「ORDER BY」の並べ方は、「昇順」か「降順」を指定します。「昇順」は「小さい数から大きい数へ向かう順序」、「降順」は「大きい数から小さい数へ向かう順序」です。SQLでは「昇順」は  **「ASC」** 、「降順」は **「DESC」** と指定します。

```SQL
  SELECT *
  FROM テーブル名
  ORDER BY （基準となる）並べ替えたいカラム名 並べ方(ASCまたはDESC);
```
<br><br>

### 1-11. LIMIT
「最大で何件取得するか」を指定するためには、「制限する」という意味の **「LIMIT」** を用います。「LIMIT」は左の図のように「 データの件数」を指定します。
LIMITはクエリの末尾に記述することで、取得するデータの数を制限します。
また、「LIMIT」も「ORDER BY」と同様に「WHERE」と併用することが可能です。

```SQL
  LIMIT データの件数;

-- WHEREとの併用
  SELECT *
  FROM 　テーブル名
  WHERE カラム名 =  ○○
  LIMIT データの件数;
```

---

<br><br>

##  2. データを登録する

### 2-1. INSERT
テーブルにレコードを挿入したいときは **INSERT** を使います。
INSERTとは「挿入する」という意味です。

```SQL
  INSERT INTO テーブル名(id, カラム名, カラム名)
  VALUES(id, '値', '値');
```

#### 2-1-1. AUTO INCREMENT
多くの場合、idカラムには **AUTO INCREMENT** という機能が使われます。
AUTO INCREMENTとは「自動で増加する」といった意味で、データが作成されるときに自動で値が割り当てられます。

```SQL
-- AUTO INCREMENTのカラムは省略できる
  INSERT INTO テーブル名(カラム名, カラム名)
  VALUES('値', '値');
```
---

<br><br>

## 3. データを更新する

### 3-1. UPDATE
データを更新したいときには **UPDATE** を使います。
複数変更したいカラムがある場合、コンマ(,)で区切ります。<br>

<span style="color: red;">※WHEREで更新するレコードを指定しないとカラム内の全データが更新されてしまいます。</span><br>

UPDATE実行後はデータを戻すことができません。実行前に一度SELECTを実行して、操作するデータを確認する習慣をつけましょう。

```SQL
  UPDATE テーブル名
  SET カラム名="値", カラム名="値"
  WHERE id = 変更したいid;
```

---

<br><br>

## 4. データを削除する

### 4-1. DELETE
レコードを削除するときは **DELETE** を使います。
UPDATEと同様にクエリ実行後はレコードを元に戻すことができないので、SELECTでレコードを確認してから削除を行いましょう。<br>

<span style="color: red;">※WHEREで削除するレコードを指定しないとテーブル内の全レコードが削除されてしまいます。</span>

```SQL
  DELETE FROM テーブル名
  WHERE id = 削除したいid;
```

---